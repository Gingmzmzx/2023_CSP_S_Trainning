# 第三天
日常膜拜不放图片了  
**小提示：**
- 因为时间太紧，笔寄中的题目描述可能不全或有错误，请以PPT中的题目为准。
- 题解中 _斜体部分_ 是使用GitHub Copilot生成的，可能有些错误，仅供参考。

小发现：机房里还有一位大佬也反着穿衣服耶（

## 上午

### 一、图论
#### 加权路径和
> 给定一个$n$个点的树，每条边带权值$w_i$。有$q$次询问，每次询问点$u$到点$v$的路径的权值，一条路径的权值计算方法如下：  
假设路径上的边权是$w_1,w_2,...,w_k$，那么路径的权值为$w_1*1+w_2*2+...+w_k*k$。

> 版本一：强制在线：$n, q \leqslant 10^5$  
版本二：可以离线：$n, q \leqslant 10^6$  
版本三：强制在线，带修改（路径上所有边的权值都加上一个数）：$n, q \leqslant 10^5$

#### 次小生成树
> 给定一张$n$个点，$m$条边，每条边权值为$w_i$的无向图，求次小生成树权值和。  
$n, m \leqslant 10^5$

### 二、二叉堆
- 没啥好考的
- 左偏树应用会多一些

#### 参考资料
- [OI-Wiki 数据结构 / 堆 / 二叉堆](https://oi-wiki.org/ds/binary-heap/)
- [Wikipedia 维基百科](https://zh.wikipedia.org/zh-hans/%E4%BA%8C%E5%8F%89%E5%A0%86)

#### 例题：优先队列
- 题目描述：  
    > 老师现场出的，没记下题目来，自己去ppt里面找补
- 图解：  
    ![](images/IMG_20231001_090107.jpg)

#### 矩形叠加问题
- 题目描述：  
    > 给定一个$n \times n$二维平面上$m$个矩形，对于$i=1, 2, ..., n$，求所有满足$x=i$的整点中被最多矩形覆盖的整点被多少个矩形覆盖。
- 提示：  
    把二维中的$x$看作时间，$y$看作一个一维序列$a_1, a_2, ..., a_n$

    一个扫描线，从左到右扫过去，看与多少个矩形有交。与一个新矩形相交时$[yl, yr]+1$，离开矩形时$[yl, yr]-1$，_最后统计一下每个点被覆盖了多少次。_

#### [LibreOJ Round #6 花火](https://contest-archive.loj.ac/contest/11/problem/3/)
图解：  
![](images/IMG_20231001_095314.jpg)

### 三、线段树分治
#### 连通块个数
- 题目描述：  
    > 维护一张无向图$q$次操作，每次加入一条边或删一条边，求每次操作后的连通块个数。  
    $q \leqslant 1e5$
- 图解：  
    ![](images/IMG_20231001_100517.jpg)

### 四、哈希 Hash
#### 哈希 & 字符串哈希
![](images/IMG_20231001_101243.jpg)  
_我记得我应该是会哈希的，为什么给我讲蒙了（_

#### 经典应用
> 给定串$S, q$次询问，每次询问两个位置$l_1, l_2$的最长公共前缀。

#### [CF1017E](https://www.luogu.com.cn/problem/CF1017E)
> 给定两个平面中的点集$S, T$，判断他们的凸包是否旋转、平移同构。  
$\vert S \vert, \vert T \vert \leqslant 1e5$, 坐标范围 $[0, 10^8]$

#### CCF 2023 D 括号
- 题目描述：  
    > 给定一个有$m$种括号的长度为$n$的括号序列，每种括号分为左右两种，有$q$次操作，每次操作有两种情况：  
        1、修改一个位置的括号类型（哪一种、左/右）  
        2、询问一个区间$[l, r]$内的括号序列是否合法，合法的定义如下：  
            - 空串是合法的括号序列  
            - 如果A和B都是合法的括号序列，那AB也是  
            - 如果A是合法的括号序列，那么(A)、)A(、[A]、]A[也是（在A左右加一种括号的左右括号）  
    $n, q \leqslant 10^5$

    > 屑老师说这是他昨天晚上现编的，原题不是括号，是消消乐类的东西
- 小提示：  
    线段树维护连乘

